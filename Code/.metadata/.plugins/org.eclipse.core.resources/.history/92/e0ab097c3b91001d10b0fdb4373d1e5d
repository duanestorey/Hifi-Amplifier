/*
 * DACPCM1681.cpp
 *
 *  Created on: Jan 10, 2023
 *      Author: duane
 */

#include "DACPCM1681.h"
#include "I2CDevice.h"

#define PCM1681_REG_MUTE	7

DAC_PCM1681::DAC_PCM1681( I2C_Device *device ) : mDevice( device ) {
	// TODO Auto-generated constructor stub
	mMuteStatus = 0;
}

DAC_PCM1681::~DAC_PCM1681() {
	// TODO Auto-generated destructor stub
}

void
DAC_PCM1681::setChannelVolume( int channel, int volume ) {
	uint8_t reg = 0;
	switch( channel ) {

	}
}

void
DAC_PCM1681::setVolume( int volume ) {

}

void
DAC_PCM1681::muteChannel( int channel, bool enable ) {
	uint8_t mask =  ( 1 << ( channel ) );
	if ( enable ) {
		// enable the bit representing this channel
		mMuteStatus = mMuteStatus & mask;
	} else {
		// disable the bit representing the channel
		mMuteStatus = mMuteStatus & ~mask;
	}

	mDevice->writeRegister( PCM1681_REG_MUTE, mMuteStatus );
}

void
DAC_PCM1681::mute( bool enable ) {
	 if ( enable ) {
		 mMuteStatus = 0xff;
	 } else {
		 mMuteStatus = 0;
	 }

	 mDevice->writeRegister( PCM1681_REG_MUTE, mMuteStatus );
}

